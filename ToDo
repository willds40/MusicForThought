fix tests one by one
refactor api class/adapter 

